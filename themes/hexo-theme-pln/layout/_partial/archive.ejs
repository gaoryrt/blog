<% var title = '';
if (page.category) title = page.category;
if (page.tag) title = page.tag;
if (page.archive){
  if (page.year) title = page.year + (page.month ? '/' + page.month : '');
  else title = __('archive_title');
} %>

<h1 class="archive-title <% if (page.tag){ %> tag<% } else if (page.category){ %> category<% } %>">
  <% if (page.archive) { %>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-archive"><polyline points="21 8 21 21 3 21 3 8"></polyline><rect x="1" y="3" width="22" height="5"></rect><line x1="10" y1="12" x2="14" y2="12"></line></svg>
  <% } else if (page.category) { %>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>
  <% } else { %>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-hash"><line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line></svg>
  <% } %>
  <%= title %>
</h1>
<div class="archive-num">
  <%= _p('page_counter', page.posts.length) %>
</div>
<div class="archive">
  <% var last = 0, year, yearArr = []; %>
    <% page.posts.filter(i => i.layout !== 'echo').each(function(post){ %>
      <% year = post.date.year(); %>

      <% if (last != year){ %>

        <% if (yearArr.length != 0){ %>
        </ul></section>
        <% } %>

        <% yearArr.push(year); %>

        <% last = year; %>

        </ul></section>
        <section data-link="year-<%= year %>" class="section-year">
            <h2><%= year %></h2>
            <ul class="archive-list">
                <div class="archive-item">
                    <div class="archive-time">
                      <%= date(post.date, 'MM-DD') %>
                    </div>
                    <div class="archive-detail">
                      <a href="<%- url_for(post.path) %>" class="archive-link">
                        <%= post.title %>
                      </a>
                    </div>
                </div>
                <hr>
                <% }else{ %>
                <div class="archive-item">
                    <div class="archive-time">
                      <%= date(post.date, 'MM-DD') %>
                    </div>
                    <div class="archive-detail">
                      <a href="<%- url_for(post.path) %>" class="archive-link">
                        <%= post.title %>
                      </a>
                    </div>
                </div>
                <hr>
      <% } %>
    <% }) %>
</div>
